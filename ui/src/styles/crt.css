/* ═══ CRT EFFECTS ═══
   Layered overlays: scanlines, vignette, bloom, flicker.
   All pointer-events: none so they never block interaction. */

.crt-scanlines {
  position: fixed;
  inset: 0;
  z-index: 99999;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 1px,
    rgba(0, 0, 0, 0.10) 1px,
    rgba(0, 0, 0, 0.10) 2px
  );
}

/* Outlands: heavier phosphor scanlines */
:root[data-theme="outlands"] .crt-scanlines {
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.18) 2px,
    rgba(0, 0, 0, 0.18) 4px
  );
}

.crt-vignette {
  position: fixed;
  inset: 0;
  z-index: 99998;
  pointer-events: none;
  background: radial-gradient(
    ellipse at center,
    transparent 50%,
    rgba(0, 0, 0, 0.4) 78%,
    rgba(0, 0, 0, 0.75) 100%
  );
}

.crt-bloom {
  position: fixed;
  inset: 0;
  z-index: 99997;
  pointer-events: none;
  box-shadow: inset 0 0 150px var(--pri-ghost);
}

.crt-flicker {
  position: fixed;
  inset: 0;
  z-index: 99996;
  pointer-events: none;
  animation: none;
}

/* Flicker only active on End of Line */
:root[data-theme="endofline"] .crt-flicker {
  animation: crt-flicker 4s ease-in-out infinite alternate;
}

@keyframes crt-flicker {
  0% {
    box-shadow: inset 0 0 80px rgba(196, 112, 255, 0.01);
  }
  50% {
    box-shadow: inset 0 0 120px rgba(176, 255, 64, 0.005);
  }
  100% {
    box-shadow: inset 0 0 80px rgba(196, 112, 255, 0.01);
  }
}

/* Toggle CRT off */
html.crt-off .crt-scanlines,
html.crt-off .crt-vignette,
html.crt-off .crt-bloom,
html.crt-off .crt-flicker {
  display: none;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .crt-flicker {
    animation: none !important;
  }
  .crt-scanlines {
    opacity: 0.5;
  }
}
